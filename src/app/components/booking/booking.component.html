<div class="booking-container">
  <!-- LEFT SIDE - India Map -->
  <div class="india-map">
    <img src="assets/images/India.png" alt="Explore India Map" />
    <p>"Explore India: A Journey for the Soul"</p>
  </div>

  <!-- CENTER - Booking Form -->
  <div class="booking-card">
    <h2>Book Your Trip</h2>
    <form>
      <!-- Full Name -->
      <div class="relative">
        <label for="name">Full Name *</label>
        <input
          id="name"
          type="text"
          class="no-icon"
          [(ngModel)]="booking.name"
          name="name"
          placeholder="Enter your name"
          required
          (input)="onInputChange()"
        />
      </div>

      <!-- Destination -->
      <div class="relative destination-input">
        <label for="destination">Destination *</label>
        <input
          id="destination"
          type="text"
          class="no-icon"
          [(ngModel)]="booking.destination"
          name="destination"
          placeholder="Search destination..."
          (input)="filterDestinations()"
          (blur)="hideDropdownDelayed()"
          autocomplete="off"
          required
        />
        <ul *ngIf="showDropdown" class="autocomplete-dropdown">
          <li
            *ngFor="let place of filteredDestinations"
            (click)="selectDestination(place)"
          >
            {{ place.name }} - {{ place.location }}
          </li>
        </ul>
      </div>

      <!-- Travel Date -->
      <div class="relative">
        <label for="date">Travel Date *</label>
        <input
          id="date"
          type="date"
          class="no-icon"
          [(ngModel)]="booking.date"
          name="date"
          required
          (change)="updateTotalPrice()"
        />
      </div>

      <!-- Number of Travelers -->
      <div class="relative">
        <label for="people">Number of Travelers *</label>
        <input
          id="people"
          type="number"
          class="no-icon"
          min="1"
          [(ngModel)]="booking.people"
          name="people"
          placeholder="e.g., 2"
          required
          (input)="updateTotalPrice()"
        />
      </div>

      <!-- Number of Days -->
      <div class="relative">
        <label for="days">Number of Days *</label>
        <input
          id="days"
          type="number"
          min="1"
          class="no-icon"
          [(ngModel)]="booking.days"
          name="days"
          placeholder="e.g., 2"
          required
          (input)="updateTotalPrice()"
        />
      </div>

      <!-- Vehicle Type -->
      <div class="relative">
        <label for="vehicle">Vehicle Type *</label>
        <select
          id="vehicle"
          class="no-icon"
          [(ngModel)]="selectedVehicleType"
          name="vehicleType"
          (change)="onVehicleTypeChange()"
        >
          <option *ngFor="let type of vehicleTypes" [value]="type">
            {{ type }}
          </option>
        </select>
      </div>

      <!-- Vehicle Model -->
      <div class="relative" *ngIf="selectedVehicleType !== 'No Vehicle'">
        <label for="model">Vehicle Model *</label>
        <select
          id="model"
          class="no-icon"
          [(ngModel)]="selectedVehicleModel"
          name="vehicleModel"
          (change)="onVehicleModelChange()"
        >
          <option *ngFor="let v of vehicleModels" [ngValue]="v">
            {{ v.model }} - {{ v.capacity }} - ₹{{ v.pricePerDay }}/day
          </option>
        </select>
      </div>

      <!-- Totals -->
      <div *ngIf="showTotal" class="mt-4 text-center">
        <p><strong>Estimated Total:</strong> {{ formatCurrency(estimatedAmount) }}</p>
        <p><strong>GST (2.5%):</strong> {{ formatCurrency(gstAmount) }}</p>
        <h3><strong>Total:</strong> {{ formatCurrency(finalAmount) }}</h3>
      </div>

      <button
        type="button"
        (click)="confirmBooking()"
        [disabled]="!showTotal"
        class="mt-2"
      >
        <i class="fa-solid fa-check-circle"></i> Confirm Booking
      </button>
    </form>
  </div>

<!-- RIGHT SIDE - Destination & Refund Info -->
<div class="destination-preview" *ngIf="selectedPlace">
  <div class="destination-details animated-text">
    <h3>{{ destinationText }}</h3>
    <p>{{ selectedPlace?.location }}</p>
    <p><strong>Price:</strong> ₹{{ selectedPlace?.price / 2 }} • {{ selectedPlace?.days }} days</p>
  </div>

  <div class="refund-policy">
    <h3><i class="fa-solid fa-rotate-left"></i> Refund Policy</h3>
    <ul>
      <li><strong>Cancel ≥72h:</strong> 90% refund</li>
      <li><strong>Cancel ≥48h:</strong> 75% refund</li>
      <li><strong>After 48h:</strong> No refund</li>
    </ul>
  </div>
</div>


<!-- Booking Confirmation Modal -->
<div *ngIf="showConfirmModal" class="modal-overlay">
  <div class="modal-content">
    <div class="modal-header">
      <i class="fa-solid fa-check-circle confirm-icon"></i>
      <h3>Booking Confirmed!</h3>
    </div>
    <p class="modal-message">
      Your trip to <strong>{{ booking.destination }}</strong> is successfully booked.
    </p>

    <div class="modal-summary" *ngIf="selectedPlace">
      <div class="summary-details">
        <h4>{{ selectedPlace?.name }}</h4>
        <p>{{ selectedPlace?.location }}</p>
        <p><strong>Date of Trip:</strong> {{ booking.date | date:'longDate' }}</p>
        <p><strong>Total:</strong> {{ formatCurrency(finalAmount) }}</p>
      </div>
    </div>

    <div class="modal-actions">
      <button class="btn-secondary" (click)="closeModal(false)">Close</button>
    </div>
  </div>
</div>

