<div class="booking-card">
  <h2>Book Your Trip</h2>
  <p>Visit destinations page to book your dream destination.</p>

  <form (ngSubmit)="confirmBooking()" class="space-y-4">
    <!-- Name -->
    <div>
      <label class="block font-medium mb-1">Full Name <span class="text-red-500">*</span></label>
      <div class="relative">
        <i class="fas fa-user"></i>
        <input
          type="text"
          [(ngModel)]="booking.name"
          name="name"
          placeholder="Enter your full name"
          required
        />
      </div>
    </div>

    <!-- Destination -->
    <div class="destination-dropdown">
      <label class="block font-medium mb-1">Destination <span class="text-red-500">*</span></label>
      <div class="relative">
        <i class="fas fa-map-marker-alt"></i>
        <input
          type="text"
          [(ngModel)]="booking.destination"
          name="destination"
          placeholder="Type to search destination"
          (input)="filterDestinations()"
          (focus)="showDropdown = true"
          (blur)="hideDropdownDelayed()"
          required
        />

        <!-- Dropdown -->
        <ul class="dropdown-list" *ngIf="showDropdown && filteredDestinations.length > 0">
          <li *ngFor="let place of filteredDestinations" (mousedown)="selectDestination(place)">
            {{ place.name }} — ₹{{ place.price }}
          </li>
        </ul>
      </div>
    </div>

    <!-- Date -->
    <div>
      <label class="block font-medium mb-1">Travel Date <span class="text-red-500">*</span></label>
      <div class="relative">
        <i class="fas fa-calendar-alt"></i>
        <input
          type="date"
          [(ngModel)]="booking.date"
          name="date"
          required
        />
      </div>
    </div>

    <!-- People -->
    <div>
      <label class="block font-medium mb-1">Number of Travelers <span class="text-red-500">*</span></label>
      <div class="relative">
        <i class="fas fa-users"></i>
        <input
          type="number"
          [(ngModel)]="booking.people"
          name="people"
          min="1"
          placeholder="No. of people"
          (input)="updateTotalPrice()"
          required
        />
      </div>
    </div>

    <!-- Total Price -->
    <div *ngIf="totalPrice > 0">
      <label class="block font-medium mb-1">Total Price</label>
      <div class="relative">
        <i class="fas fa-wallet"></i>
        <input
          type="text"
          [value]="totalPrice | currency: 'INR'"
          readonly
        />
      </div>
    </div>

    <!-- Confirm Booking -->
    <button
      type="submit"
      [disabled]="
        !booking.name ||
        !booking.destination ||
        !booking.date ||
        !booking.people ||
        totalPrice === 0
      "
    >
      <span *ngIf="!isBooking">Confirm Booking</span>
      <span *ngIf="isBooking" class="flex items-center justify-center">
        <svg
          class="animate-spin -ml-1 mr-2 h-5 w-5 text-white"
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
        >
          <circle
            class="opacity-25"
            cx="12"
            cy="12"
            r="10"
            stroke="currentColor"
            stroke-width="4"
          ></circle>
          <path
            class="opacity-75"
            fill="currentColor"
            d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
          ></path>
        </svg>
        Booking...
      </span>
    </button>
  </form>
</div>
